<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>Reportando vulnerabilidades en proyectos open source</title>

  <link rel="stylesheet" href="node_modules/reveal.js/dist/reset.css">
  <link rel="stylesheet" href="node_modules/reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="node_modules/reveal.js/dist/theme/white.css">

  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="node_modules/highlight.js/styles/atom-one-light.css ">

  <!-- Fontawewome -->
  <link href="node_modules/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section>
        <header>
          <h1>Reportando vulnerabilidades</h1>
          <h2>en proyectos Open Source</h2>
        </header>
        <p>
          <small>
            Santos Gallegos
            -
            <a href="mailto:stsewd@proton.me">
              stsewd@proton.me
            </a>
          </small>
          <br>
          <small>
            @stsewd
            <a href="http://github.com/stsewd"><i class="fab fa-github"></i></a>
            <a href="http://twitter.com/stsewd"><i class="fab fa-twitter"></i></a>
          </small>
        </p>

        <aside class="notes">
          Probablemente me recuerden de charlas relacionadas con open source,
          y la importancia de contribuir a ellos.
          Bueno, esta es otra de esas charlas,
          pero con un enfoque hacia la seguridad.
        </aside>
      </section>


      <section>
        <h2>$ WHOAMI</h2>
        <ul>
          <li>Web developer</li>
          <li>Ethical hacker</li>
          <li><i class="fab fa-python"></i> <i class="fab fa-rust"></i></li>
          <li>
            @stsewd - <a href="https://stsewd.dev/" target="_blank">https://stsewd.dev/</a>
          </li>
        </ul>

        <p>
          <img src="img/rtd-logo-vertical.png" width="400px">
        </p>
        <aside class="notes">
          Hola, soy Santos Gallegos, soy desarrollador web, y hacker √©tico.
          Contribuyo activamente a proyectos open source,
          y he reportado vulnerabilidades en varios proyectos dentro y fuera de mi trabajo,
          como neovim, gitpython, django-allauth, Read the Docs, y un mont√≥n m√°s.
          Principalmente trabajo con Python y Rust.
          Actualmente trabajo en Read the Docs, soy core developer.
          De vez en cuando tambi√©n hago bug bounty.
          Me pueden encontrar en Internet como stsewd.
        </aside>
      </section>

      <section data-background-image="img/contribute.svg" data-background-opacity="0.3" data-background-size="contain"
        data-transition="fade-out">
        <h2>Contribuyendo a proyectos open source</h2>

        <ul>
          <li>C√≥digo</li>
          <li>Documentaci√≥n</li>
          <li>Traducciones</li>
          <li>Reportando bugs</li>
        </ul>

        <aside class="notes">
          Contribuir a proyectos open source es una excelente forma de
          aprender, de hacer networking, de mejorar tu CV, y de ayudar a la
          comunidad, de dejar de ser simplemente consumidores.

          Se puede contribuir a un proyecto de muchas formas,
          no necesariamente escribiendo c√≥digo.
          Por ejemplo, reportando bugs, respondiendo preguntas,
          escribiendo documentaci√≥n, traduciendo, etc.

          Y una de las formas que vamos a ver hoy es reportando bugs, especialmente bugs que pueden llevar a una
          vulnerabilidad.
        </aside>
      </section>

      <section data-background-color="#1b998b" data-background-image="img/contribute.svg" data-background-opacity="0.1"
        data-background-size="contain" data-transition="fade-in">
        <h2>Contribuyendo a proyectos open source</h2>
        <h2 class="r-fit-text">Reportando</h2>
        <h2 class="r-fit-text">vulnerabilidades</h2>
      </section>

      <section data-background-color="#89CFF3" data-background-image="img/shield.png" data-background-size="400px"
        data-background-opacity="0.5">
        <header>
          <h2 class="r-fit-text">Seguridad en</h2>
          <h2 class="r-fit-text">proyectos</h2>
          <h2 class="r-fit-text">Open source</h2>
        </header>

        <p>
          <small>
            <a href="https://snyk.io/reports/open-source-security/">https://snyk.io/reports/open-source-security/</a>
          </small>
        </p>

        <aside class="notes">
          Siempre presumimos que los proyectos open source son m√°s seguros que los proyectos privativos,
          el c√≥digo es p√∫blico, todo el mundo puede verlo, por lo que introducir una vulnerabilidad es m√°s dif√≠cil.

          Probablemente se les venga a la mente un proyecto como Linux, con una comunidad muy grande
          pendiente de todos los cambios.

          Ah√≠ les dejo un art√≠culo de Snyk, sobre el estado de la seguridad en proyectos open source en 2023.
        </aside>
      </section>

      <section>
        <h2>Seguridad en proyectos Open source</h2>
        <img src="img/xkcd-dependency.png" alt="">

        <aside class="notes">
          Pero la realidad no es as√≠. Usualmente es una sola persona la que mantiene el proyecto
          en su tiempo libre. Eso no est√° bien, as√≠ que hoy vamos a ver una manera en la que todos
          podemos ayudar, reportando vulnerabilidades.
        </aside>
      </section>

      <section data-background-image="img/shield.png" data-background-size="400px" data-background-opacity="0.3">
        <h2>Seguridad en proyectos Open source</h2>
        <h3>Vectores de ataque</h3>
        <ul>
          <li>
            Acceso no autorizado al repositorio
          </li>
          <li>
            Acceso no autorizado a la cuenta de un maintainer
          </li>
          <li>
            C√≥digo malicioso en un pull request
          </li>
          <li>
            Supply chain attacks
          </li>
        </ul>

        <aside class="notes">
          Existen varios vectores de ataque, por ejemplo,
          un atacante puede obtener acceso al repositorio,
          esto puede ser por un leak de credenciales de una API,
          explotando alguna vulnerabilidad en el CI.
          Acceso no autorizado a la cuenta de un maintainer,
          puede ser por un leak de credenciales,
          take over de una cuenta de correo,
          por ello es importante usar autenticaci√≥n de dos factores.
          Un atacante puede enviar un PR intencionadamente con un vulnerabilidad.
          Curiosamente hubo el caso de una universidad que hizo esto con fines de "investigaci√≥n" y fue baneada del kernel de Linux.
          Supply chain attacks, que es cuando una dependencia directa o indirecta es comprometida.
        </aside>
      </section>

      <section data-background-image="img/shield.png" data-background-size="400px" data-background-opacity="0.3">
        <h2>Seguridad en proyectos Open source</h2>
        <p>
          Vulnerabilidades introducidas de manera no intencionada
        </p>

        <aside class="notes">
          Hoy vamos a enfocarnos en bugs que se introducen de manera no intencionada,
          y que pueden llevar a una vulnerabilidad que podr√≠a comprometer la integridad, confidencialidad,
          o disponibilidad de un sistema.

          Esto puede ser por desconocimiento, o por descuido. Errores pasan.
          Somos errores, todos cometemos humanos.

          Los otros tipos vulnerabilidades tambi√©n se pueden reportar, y seguir el mismo proceso,
          en realidad, gran parte del proceso que vamos a ver se puede aplicar a proyectos que no son open source.

          Y para poder seguir presumiendo de la seguridad de los proyectos open source,
          es importante que ayudemos encontrando, reportando y arreglando vulnerabilidades.
          Incluso antes de que sean publicadas en un nuevo release, haciendo review de los parches.
          Entre m√°s ojos mejor, la prevenci√≥n es importante,
          y hasta el uso de herramientas como fuzzers, scanners, y linters.
        </aside>
      </section>

      <section data-background-color="#da5552">
        <h2>Ejemplo üêû</h2>
        <p>
          Vulnerabilidades introducidas de manera no intencionada
        </p>

        <pre class=""><code data-trim data-noescape class="python" data-line-numbers="1-5|3-5,7-8|3-5,10-11">
            import subprocess

            def clone(repo, destination):
                # C√≥digo vulnerable a code injection.
                subprocess.run(["git", "clone", repo, destination])

            # Esto no funciona
            clone("; touch /tmp/pwn;", "...")

            # Esto si!
            clone("--upload-pack=touch /tmp/pwn", "file:///foo")
          </code></pre>

        <aside class="notes">
          Por ejemplo, este c√≥digo es vulnerable a un ataque de command injection.
          Pero Santos, ese c√≥digo est√° usando subprocess.run, que no es vulnerable a command injection.
          Correcto, no lo es, algo como esto no funcionar√≠a.
          Pero la forma en la que estamos invocando git es vulnerable,
          ya que le podemos hacer que git interprete el repositorio como una opci√≥n,
          en lugar de un argumento posicional.
          En este caso al opci√≥n --upload-pack, esta puede ejecutar cualquier comando.
      </section>

      <section data-background-color="#1b998b">
        <h2>Ejemplo üêû</h2>
        <p>
          Vulnerabilidades introducidas de manera no intencionada
        </p>

        <pre><code data-trim data-noescape class="python" data-line-numbers="4|">
            import subprocess

            def clone(repo, destination):
                subprocess.run(["git", "clone", "--", repo, destination])

            # Esto no funciona
            clone("; touch /tmp/pwn;", "...")

            # Esto tampoco!
            clone("--upload-pack=touch /tmp/pwn", "file:///foo")
          </code></pre>

        <p>
          <small>
            <a style="color: white;" href="https://github.com/gitpython-developers/GitPython/pull/1518">
              https://github.com/gitpython-developers/GitPython/pull/1518
            </a>
          </small>
        </p>

        <aside class="notes">
          La soluci√≥n es poner un doble gui√≥n para indicarle a git que no hay m√°s opciones,
          y que las siguientes argumentos deben ser interpretados como argumentos posicionales.

          Esta es una vulnerabilidad real, que report√© y ayud√© a arreglar
          en la librer√≠a GitPython.
        </aside>
      </section>

      <section data-background-color="#89CFF3">
        <header>
          <h2 class="r-fit-text">Reportando</h2>
          <h2 class="r-fit-text">vulnerabilidades</h2>
        </header>

        <aside class="notes">
          A continuaci√≥n vamos a ver los pasos a seguir para reportar una vulnerabilidad en un proyecto open source,
          hasta su resoluci√≥n, divulgaci√≥n y posible obtenci√≥n de un CVE.

          El primer paso es haber encontrado una vulnerabilidad.
          Ya vamos a hablar un poco de como encontrar vulnerabilidades m√°s adelante.
        </aside>
      </section>

      <section data-background-color="#89CFF3" data-background-image="img/confidential.png" data-background-size="600px"
        data-background-opacity="0.5">
        <h2 class="r-fit-text">
          Confidencialidad
        </h2>
        <p>
          Mantener la confidencialidad durante todo el proceso es importante
        </p>

        <aside class="notes">
          Mantener la confidencialidad durante todo el proceso es importante,
          debemos mantener la vulnerabilidad en secreto hasta que haya sido mitigada y publicada
          por los maintainers del proyecto.
        </aside>
      </section>

      <section data-background-color="#da5552" data-background-image="img/confidential.png" data-background-size="600px"
        data-background-opacity="0.5">
        <header>
          <h2>Confidencialidad</h2>
          <h3>Lo que no debemos hacer</h3>
        </header>
        <ul>
          <li>Contarle a todo el mundo</li>
          <li>Publicarlo en redes sociales como LinkedIn o Twitter</li>
          <li>Crear un issue o PR en el repositorio</li>
        </ul>

        <aside class="notes">
          Debemos asegurarnos de reportar la vulnerabilidad de manera confidencial,
          por el medio que el proyecto nos indique.
        </aside>
      </section>

      <section data-background-color="#89CFF3" data-background-image="img/verfication-badge.png"
        data-background-size="700px" data-background-opacity="0.5">
        <h2 class="r-fit-text">
          Verificaci√≥n
        </h2>
        <p>
          Aseg√∫rate que la vulnerabilidad sea real
        </p>

        <aside class="notes">
          Los errores o malentendidos pueden ocurrir, y no queremos molestar a los maintainers con
          falsos positivos, o que gastes tu tiempo.
        </aside>
      </section>

      <section data-background-image="img/verfication-badge.png" data-background-size="700px"
        data-background-opacity="0.3">
        <h2>Verificaci√≥n</h2>
        <ul>
          <li>Aseg√∫rate de usar la √∫ltima version o una versi√≥n soportada</li>
          <li>
            Lee la documentaci√≥n del proyecto
          </li>
          <li>
            Reproduce la vulnerabilidad en un entorno aislado
          </li>
          <li>
            Aseg√∫rate que el origen de la vulnerabilidad sea el proyecto que vas a reportar
          </li>
        </ul>

        <aside class="notes">
          Puede que la vulnerabilidad ya est√© arreglada en la rama master o main del proyecto.
          La √∫ltima versi√≥n disponible en repositorios como npm, pypi, etc,
          puede que no sea la √∫ltima versi√≥n proyecto, revisa el lugar donde est√° alojado el c√≥digo, como GitHub o
          GitLab.

          Lee la documentaci√≥n del proyecto, puede que este caso ya est√© documentado o tenga una explicaci√≥n, o
          advertencia sobre su uso.

          Aseg√∫rate que lo puedes reproducir en un entorno aislado, y que no sea un problema de tu entorno.
          Aunque puede que sea v√°lido si el bug solo se puede reproducir en ciertas condiciones.

          Aseg√∫rate que el origen del bug sea en el proyecto donde lo vas a reportar,
          y no en una dependencia.

          Otra vez, puede que sea v√°lido si el bug solo se puede reproducir en ciertas condiciones.
        </aside>
      </section>

      <section data-background-color="#da5552" data-transition="none-out">
        <h2>Ejemplo üêõ</h2>
        <p>
          Vulnerabilidades bajo ciertas circunstancias
        </p>

        <pre class=""><code data-trim data-noescape class="python" data-line-numbers="|2,4">
          urlpatterns = [
              # Vulnerable a cache poisoning bajo ciertas circunstancias.
              re_path(
                  r"^account/security-log/",
                  UserSecurityLog.as_view(),
                  name="user_security_log",
              )
          ]
        </code></pre>

        <div class="fragment">
          <img src="img/cf-logo.png" width="250">
          <p>
            <q>Cloudflare only caches based on file extension and not by MIME type. The Cloudflare CDN does not cache
              HTML by default.</q>
          </p>
          <p>
            <small>
              <a style="color: white;"
                href="https://developers.cloudflare.com/cache/concepts/default-cache-behavior/#default-cached-file-extensions">https://developers.cloudflare.com/cache/concepts/default-cache-behavior/#default-cached-file-extensions</a>
            </small>
          </p>

        </div>

        <aside class="notes">
          Este es un ejemplo de un proyecto hecho en Django,
          Lo que esto hace es que mapea la ruta /account/security-log/ a una vista,
          esto lo hace usando una expresi√≥n regular.

          Este c√≥digo es vulnerable a cache poisoning bajo ciertas circunstancias.

          Qu√© pasar√≠a si le agregamos un CDN como Cloudflare,
          para mejorar el performance de nuestro sitio web,
          cachear contenido est√°tico, como im√°genes, css, js.

          CF es muy bueno en ello.
          Esto es extra√≠do de la documentaci√≥n de CF.
          Nos dice que por defecto aplica el cache por extensi√≥n de archivo,
          (entre ellas js, css, im√°genes, etc), y tambi√©n nos dice que no
          aplica el cache a HTML por defecto. Lo cual es genial!
          No queremos que todo el mundo vea el contenido de la p√°gina de otros usuarios.
        </aside>
      </section>

      <section data-transition="none-in" data-background-color="#da5552">
        <h2>Ejemplo üêõ</h2>
        <p>
          Vulnerabilidades bajo ciertas circunstancias
        </p>

        <pre class=""><code data-trim data-noescape class="python" data-line-numbers="2,4">
          urlpatterns = [
              # Vulnerable a cache poisoning bajo ciertas circunstancias.
              re_path(
                  r"^account/security-log/",
                  UserSecurityLog.as_view(),
                  name="user_security_log",
              )
          ]
        </code></pre>

        <div>
          <img src="img/cf-logo.png" width="250">
          <p>
            <q>Cloudflare only caches <strong>based on file extension and not by MIME type</strong>. The Cloudflare CDN
              does not cache HTML by default.</q>
          </p>

          <p>
            <small>
              <a style="color: white;"
                href="https://developers.cloudflare.com/cache/concepts/default-cache-behavior/#default-cached-file-extensions">https://developers.cloudflare.com/cache/concepts/default-cache-behavior/#default-cached-file-extensions</a>
            </small>
          </p>

        </div>

        <aside class="notes">
          Pero pongamos un poco m√°s de atenci√≥n a lo que dice la documentaci√≥n.
          Nos dice que el cache es aplicado por extensi√≥n de archivo, y no por MIME type.
          Lo que quiere decir que si una URL termina en .js, CF va a aplicar el cache.
        </aside>
      </section>

      <section data-background-color="#da5552">
        <h2>Ejemplo üêõ</h2>
        <p>
          Vulnerabilidades bajo ciertas circunstancias
        </p>

        <pre class=""><code data-trim data-noescape class="python" data-line-numbers="2,4">
          urlpatterns = [
              # Vulnerable a cache poisoning bajo ciertas circunstancias.
              re_path(
                  r"^account/security-log/",
                  UserSecurityLog.as_view(),
                  name="user_security_log",
              )
          ]
        </code></pre>

        <pre class=""><code data-trim data-noescape class="console" data-line-numbers="1-3|5-7|9-11|13-15" style="max-height: 200px;">
          $ curl -I https://example.com/account/security-log/
          HTTP/2 200
          cf-cache-status: DYNAMIC

          $ curl -I https://example.com/account/security-log/foo/bar/
          HTTP/2 200
          cf-cache-status: DYNAMIC

          $ curl https://example.com/account/security-log/foo/bar.js
          HTTP/2 200
          cf-cache-status: MISS

          $ curl https://example.com/account/security-log/foo/bar.js
          HTTP/2 200
          cf-cache-status: HIT
        </code></pre>

        <aside class="notes">
          Lo que nos lleva a la vulnerabilidad.
          Aqu√≠ vemos un request normal a la p√°gina,
          CF nos retorna este header indicando el estado del cache para esta p√°gina.
          En este caso nos dice DYNAMIC, que significa que el cache no aplica a esta p√°gina.

          Aqu√≠ vemos que si le agregamos cualquier cosa a la URL, el servidor nos retorna la p√°gina,
          este es debido a que en la expresi√≥n regular no estamos validando el final de la URL,
          toda URL que empiece con /account/security-log/ va a ser mapeada a la vista.

          Pero a√∫n vemos que la p√°gina no est√° siendo cacheada.
          Gracias a que CF no aplica el cache a HTML por defecto.

          Pero que pasa si le agregamos .js al final de la URL?
          CF va a aplicar el cache, ya que la URL termina en una extensi√≥n de archivo
          que CF aplica el cache.

          En este caso tenemos MISS que significa que el cache aplica a esta p√°gina,
          pero no fue encontrado, pero la siguiente vez que hagamos el request,
          el contenido de la p√°gina va a ser servido desde el cache, y no desde el servidor.

          Con esto podemos hacer que un usuario logeado ingrese a esta URL,
          y su contenido sea agregado al cache de CF,
          luego de que el usuario ingrese a la p√°gina, el atacante ingresa a la p√°gina,
          y el contenido de la p√°gina del usuario logeado es servido desde el cache de CF.
        </aside>
      </section>

      <section data-background-color="#da5552">
        <h2>Ejemplo üêõ</h2>
        <p>Cache poisoning</p>
        <img src="img/cache-poisoning.png">
      </section>

      <section data-background-color="#1b998b">
        <h2>Ejemplo üêõ</h2>
        <p>
          Vulnerabilidades bajo ciertas circunstancias
        </p>

        <pre class=""><code data-trim data-noescape class="python" data-line-numbers="|2,4">
          urlpatterns = [
              # Vulnerable a cache poisoning bajo ciertas circunstancias.
              re_path(
                  r"^account/security-log/$",
                  UserSecurityLog.as_view(),
                  name="user_security_log",
              )
          ]
        </code></pre>

        <pre class=""><code data-trim data-noescape class="console">
          $ curl -I https://example.com/account/security-log/
          HTTP/2 200
          cf-cache-status: DYNAMIC

          $ curl -I https://example.com/account/security-log/foo/bar/
          HTTP/2 404
          cf-cache-status: DYNAMIC

          $ curl https://example.com/account/security-log/foo/bar.js
          HTTP/2 404
          cf-cache-status: DYNAMIC
        </code></pre>

        <p>
          <small>
            <a style="color: white;"
              href="https://github.com/readthedocs/readthedocs.org/security/advisories/GHSA-7fcx-wwr3-99jv">https://github.com/readthedocs/readthedocs.org/security/advisories/GHSA-7fcx-wwr3-99jv</a>
          </small>
        </p>

        <aside class="notes">
          Esto lo podemos arreglar de varias formas,
          una manera de arreglarlo desde el c√≥digo es terminar la expresi√≥n regular con $.

          De esta manera solo vamos a mapear la URL /account/security-log/ de manera exacta.
          Los ejemplos anteriores ahora ya no funcionan, ya que la p√°gina no existe,
          y el cache no aplica.

          Esta es una vulnerabilidad real que report√© y ayud√© a arreglar en mi trabajo.
        </aside>
      </section>

      <section data-background-color="#89CFF3" data-background-image="img/security-policy.png"
        data-background-size="250px" data-background-opacity="0.5">
        <h2 class="r-fit-text">
          Pol√≠tica de seguridad
        </h2>
        <h2 class="r-fit-text">
          Contacto
        </h2>
        <p>
          Busca la pol√≠tica de seguridad, contacto, o medio adecuado para reportar la vulnerabilidad
        </p>

        <aside class="notes">
          Ya tenemos comprobado que la vulnerabilidad es real.
          El siguiente paso es buscar la pol√≠tica de seguridad del proyecto,
          o el medio adecuado para reportar la vulnerabilidad.
        </aside>
      </section>

      <section data-background-image="img/security-policy.png" data-background-size="250px"
        data-background-opacity="0.3">
        <h2>Pol√≠tica / Contacto</h2>
        <p>Repositorio del proyecto</p>
        <ul>
          <li><code>SECURITY.md</code></li>
          <li><code>SECURITY.txt</code></li>
          <li><code>README.md</code></li>
        </ul>

        <aside class="notes">
          El primer lugar donde buscar es en el repositorio del proyecto,
          especialmente en los siguientes archivos.

          Si el repositorio est√° hospedado en GitHub,
          en la parte superior del proyecto podemos encontrar una pesta√±a "Security",
          donde se encuentra la pol√≠tica de seguridad del proyecto.
        </aside>
      </section>

      <section data-background-image="img/security-policy.png" data-background-size="250px"
        data-background-opacity="0.3">
        <h2>Pol√≠tica / Contacto</h2>
        <p>Documentaci√≥n o web principal</p>
        <ul>
          <li>Realiza una b√∫squeda: security</li>
          <li>
            https://github.com<mark>/.well-known/security.txt</mark>
          </li>
        </ul>

        <aside class="notes">
          Si no encontramos nada en el repositorio, podemos buscar en la documentaci√≥n del proyecto,
          con palabras clave como security, vulnerability, etc.

          Si el proyecto tiene una web principal, podemos buscar en el path /.well-known/security.txt,
          es un est√°ndar de la industria.
        </aside>
      </section>

      <section data-background-color="#ff9770">
        <h2>Pol√≠tica de seguridad</h2>

        <p class="r-fit-text">¬°L√©ela!</p>

        <aside class="notes">
          Si encontramos una pol√≠tica de seguridad, lo primero que debemos hacer es leerla.
          Ah√≠ vamos a encontrar informaci√≥n importante, como el medio adecuado para reportar la vulnerabilidad,
          las versiones soportadas, el tiempo de respuesta, las vulnerabilidades que son v√°lidas, etc.
        </aside>
      </section>

      <section data-background-image="img/security-policy.png" data-background-size="250px"
        data-background-opacity="0.3">
        <header>
          <h2><code>404</code></h2>
          <h2><code>Contacto Not Found</code></h2>
        </header>

        <section>
          <p>
            Pregunta por el contacto en el repositorio
          </p>


          <ul>
            <li>
              Issue tracker
            </li>
            <li>
              Lista de correos
            </li>
          </ul>
          <p>
            <strong>
              ¬°Recuerda no incluir detalles de la vulnerabilidad!
            </strong>
          </p>
          <aside class="notes">
            Si el proyecto no tiene una pol√≠tica de seguridad,
            o no la encontramos, tenemos dos opciones,
            preguntar por el contacto en el repositorio,
            creando un issue o enviando un correo a la lista de correos.

            Recuerda que estos medios no son confidenciales,
            son p√∫blicos, as√≠ que no incluyas detalles de la vulnerabilidad.

            Escribe algo como "Encontr√© una vulnerabilidad en el proyecto, ¬øcual es el medio adecuado para reportarla?"
          </aside>
        </section>

        <section>
          <p>
            Busca un email de alg√∫n maintainer
          </p>
          <ul>
            <li>
              Documentaci√≥n
            </li>
            <li>
              Historial de commits
            </li>
          </ul>
          <p>
            <strong>
              Aseg√∫rate de que es la persona correcta
              antes de incluir detalles de la vulnerabilidad.
            </strong>
          </p>

          <aside class="notes">
            La otra opci√≥n es buscar un email de alg√∫n maintainer,
            esto lo podemos hacer buscando en la documentaci√≥n,
            o en el historial de commits (git log).

            Si encuentras un email,
            no env√≠es el reporte sin antes asegurarte que es la persona correcta,
            y el medio adecuado para reportar la vulnerabilidad.

            Escribe algo como "Encontr√© una vulnerabilidad en el proyecto, ¬øes este el medio adecuado para reportarla o
            eres la persona con la que debo contactar?".
          </aside>
        </section>
      </section>

      <section data-background-color="#89CFF3" data-background-image="img/typewritter.png" data-background-size="300px"
        data-background-opacity="0.2">
        <h2 class="r-fit-text">Reporte</h2>
        <p>
          Al final de la b√∫squeda, deber√≠amos tener un email o plataforma donde reportar la vulnerabilidad
          de manera confidencial.
        </p>
      </section>

      <section>
        <h2>Reporte</h2>
        <p>
          Incluye la mayor cantidad de informaci√≥n posible
        </p>
        <ul>
          <li>
            L√≠neas de c√≥digo afectadas o vulnerables
          </li>
          <li>
            Proof of Concept (PoC)
          </li>
          <li>
            Impacto
          </li>
          <li>
            Sugerencias de como arreglar el bug
          </li>
        </ul>

        <p style="text-align: right; opacity: 0.9;">
          <img src="img/typewritter.png" alt="" width="200">
        </p>

        <aside class="notes">
          Dependiendo del proyecto, puede que tengamos disponible un template para reportar bugs de seguridad,
          o puede que no. En cualquier caso, aseg√∫rate de incluir la mayor cantidad de informaci√≥n posible,
          para que los maintainers puedan reproducir el bug, puedes incluir un PoC (Proof of Concept),
          sugerencias de como arreglar el bug, el impacto de la vulnerabilidad,
          link al c√≥digo vulnerable, versiones afectadas, o hasta sugerir un parche en tu reporte.
          Hagamos la vida de los maintainers lo m√°s f√°cil posible.
        </aside>
      </section>

      <section>
        <h2>Reporte</h2>

        <p>Recuerda...</p>
        <ul>
          <li>
            Confidencialidad
          </li>
          <li>
            S√© paciente y amable, los maintainers son voluntarios
          </li>
          <li>
            Como todo tipo de contribuci√≥n,
            reportar una vulnerabilidad es una contribuci√≥n voluntaria*
          </li>
        </ul>

        <p style="text-align: right; opacity: 0.9;">
          <img src="img/typewritter.png" alt="" width="200">
        </p>

        <aside class="notes">
          Cuando hayas enviado el reporte, puede que tengas una respuesta en un par de d√≠as en el mejor caso.

          Recuerda no publicar nada hasta que la vulnerabilidad haya sido mitigada y publicada.

          Recuerda, que al menos que el proyecto sea de alguna compa√±√≠a,
          los maintainers son voluntarios, nadie les paga por mantener el proyecto.
          S√© paciente y amable, puede que la persona de contacto no est√© familiarizada con el proceso
          de reportar bugs de seguridad (en su mayor√≠a son developers),
          as√≠ que trata de no usar jerga de seguridad, y explica todo lo mejor posible.
          Trata de hacer la vida de los maintainers lo m√°s f√°cil posible.

          Ahora, ah√≠ puse un asterisco, y es que si hay proyectos
          open source que ofrecen recompensas, usualmente son de empresas,
          pero tambi√©n hay proyectos que no son parte de una
          empresa y ofrecen recompensas, como el programa Internet Bug Bounty.
          https://hackerone.com/ibb.
          Ah√≠ est√°n proyectos como Django, Ruby, Node.
        </aside>
      </section>

      <section data-background-color="#89CFF3">
        <header>
          <h2 class="r-fit-text">Confirmaci√≥n y</h2>
          <h2 class="r-fit-text">Mitigaci√≥n</h2>
        </header>
        <p>
          Una vez que la vulnerabilidad haya sido confirmada, el siguiente paso es arreglarla.
        </p>

        <aside class="notes">
          Una vez que la vulnerabilidad haya sido confirmada, el siguiente paso es arreglarla.
          Este proceso usualmente es realizado de manera privada, y puede ser inmediata o puede tomar varios d√≠as o
          semanas.
          Puede que te pidan ayuda para verificar que la vulnerabilidad ha sido completamente mitigada, u opini√≥n sobre
          como arreglarla.

          Estate atento a los correos, o a la plataforma que se est√° usando para que puedas responder lo m√°s pronto
          posible.

          Recuerda no publicar nada hasta que la vulnerabilidad haya sido mitigada y publicada.
        </aside>
      </section>

      <section>
        <header>
          <h2><code>404</code></h2>
          <h2><code>Confirmaci√≥n Not Found</code></h2>
        </header>
        <p>
          Puedes hacer tu reporte p√∫blico luego de 90 d√≠as,
          es el est√°ndar de la industria.
        </p>

        <aside class="notes">
          Aseg√∫rate que hayas intentado contactar a los maintainers por todos los medios posibles.
          Si no recibes respuesta del proyecto dentro de 90 d√≠as, puedes hacer p√∫blico el reporte.
          90 d√≠as es el est√°ndar de la industria. Pero puede que los maintainers te pidan m√°s tiempo.
          No porque no les contestaron en 2 d√≠as, significa que no les importa,
          recuerda que los maintainers son voluntarios, y pueden tener otras prioridades.
          No tienen la obligaci√≥n de responder a tu reporte, o arreglar la vulnerabilidad.
        </aside>
      </section>

      <section data-background-color="#89CFF3">
        <header>
          <h2 class="r-fit-text">
            Divulgaci√≥n
          </h2>
          <h2 class="r-fit-text">
            P√∫blica
          </h2>
        </header>
        <p>
          Los maintainers tienen la opci√≥n de reservar un CVE para la vulnerabilidad si lo consideran necesario.
        </p>
        <p>
          Est√° bien pedir o recordar a los maintainers que te acrediten por reportar la vulnerabilidad.
        </p>

        <aside class="notes">
          Y finalmente, una vez que la vulnerabilidad ha sido arreglada, puedes hacer p√∫blico tu reporte.
        </aside>
      </section>

      <section data-background-color="#89CFF3" data-background-image="img/verfication-badge.png"
        data-background-size="700px" data-background-opacity="0.5">
        <h2 class="r-fit-text">
          Verificaci√≥n
        </h2>
        <h3>re-verificaci√≥n</h3>
        <p>
          Aseg√∫rate que la vulnerabilidad haya sido arreglada
        </p>

        <aside class="notes">
          Ya hab√≠amos mencionado la verificaci√≥n al principio,
          esta es otro verificaci√≥n, o re-verificaci√≥n,
          para asegurarnos que la vulnerabilidad haya sido realmente
          arreglada.

          Esto es algo que me pas√≥, el maintainer no estaba con mucho tiempo
          y se apur√≥ en lanzar la correcci√≥n, e hizo el anuncio y todo.
          Pero el proyecto a√∫n era vulnerable, por suerte me puse a leer el parche
          y vi que el fix no era correcto.
        </aside>
      </section>

      <section>
        <h2 class="r-fit-text">Plataformas</h2>
        <p>
          Existen varias plataformas que son muy √∫tiles parar las personas que reportan vulnerabilidades,
          y para los maintainers.
        </p>

        <aside class="notes">
          En la mayor√≠a de casos que los proyectos no tienen una pol√≠tica de seguridad,
          el proceso se da por email, pero proyectos que tienen una pol√≠tica de seguridad,
          pueden usar una plataforma para reportar vulnerabilidades.
          Existen varias plataformas que son muy √∫tiles parar las personas que reportan vulnerabilidades,
          y para los maintainers.
        </aside>
      </section>

      <section>
        <h2>Plataformas</h2>
        <ul>
          <li>
            Snyk - <a href="https://snyk.io/">https://snyk.io/</a>
          </li>
          <li>
            huntr.dev - <a href="https://huntr.dev/">https://huntr.dev/</a>
          </li>
          <li>
            GitHub Advisories - <a
              href="https://docs.github.com/code-security">https://docs.github.com/code-security</a>
          </li>
          <li>
            hackerone - <a href="https://hackerone.com/">https://hackerone.com/</a>
          </li>
        </ul>

        <aside class="notes">
          Snyk te ayuda a contactar a los maintainers, a verificar la vulnerabilidad, y dan seguimiento a esta.

          huntr.dev fue adquirida por una compa√±√≠a,
          y ahora solo aceptan reportes de vulnerabilidades en proyectos relacionados con AI.
          Lo interesante de esta plataforma es que pod√≠as obtener recompensas por reportar vulnerabilidades,
          y estas eran incluso repartidas con la persona que arregl√≥ la vulnerabilidad.

          GitHub Advisories es una plataforma de GitHub para reportar vulnerabilidades en proyectos open source.
          Es muy completa, y su integraci√≥n con el repositorio es muy buena.

          hackerone es usualmente usada por compa√±√≠as, pero tambi√©n he visto un par de proyectos open source como Django
          que la usan.

          Todas estas plataformas facilitan la obtenci√≥n de un CVE.

          Si el proyecto no tiene una pol√≠tica de seguridad, puedes sugerirle al proyecto una,
          o si no usa una de estas plataformas, puedes sugerirle al proyecto que las use.
        </aside>
      </section>

      <section>
        <h2 class="">GitHub Advisories</h2>

        <ul>
          <li>Reportes, clasificaci√≥n</li>
          <li>Discusiones privadas</li>
          <li>Versiones afectadas</li>
          <li>CWE, CVSS, CVE</li>
          <li>PRs privadas</li>
          <li>Cr√©dito a todos los involucrados</li>
        </ul>

        <p style="text-align: right;">
          <img src="img/github-mark.png" alt="" width="100">
        </p>

        <aside class="notes">
          - Puedes crear un reporte de vulnerabilidad, y enviarlo al proyecto.
          - Los maintainer pueden clasificar el reporte como v√°lido o no.
          - Se pueden crear discusiones sobre el reporte. Todas esa discusiones son privadas.
          - Se pueden invitar a otras personas a participar en la discusi√≥n.
          - Te permite clasificar la severidad de la vulnerabilidad usando CVSS.
          - Permite adjuntar CWEs al reporte.
          - Permite a los maintainers asignar un CVE a la vulnerabilidad.
          - Permite especificas las versiones afectadas.
          - Permite dar cr√©dito a la persona que report√≥ la vulnerabilidad,
            a la que la arregl√≥, y a la que la verific√≥, etc.
        </aside>
      </section>

      <section>
        <header>
          <h2>GitHub advisories</h2>
          <h2>Demo</h2>
        </header>
        <ul>
          <li>
            <a
              href="https://github.com/stsewd/charla-reportando-vulnerabilidades-en-proyectos-open-source/">https://github.com/stsewd/charla-reportando-vulnerabilidades-en-proyectos-open-source/</a>
          </li>
          <li>
            <a
              href="https://github.com/neovim/neovim/security/advisories/GHSA-6f9m-hj8h-xjgj">https://github.com/neovim/neovim/security/advisories/GHSA-6f9m-hj8h-xjgj</a>
          </li>
          <li>
            <a
              href="https://github.com/gitpython-developers/GitPython/security/advisories/GHSA-cwvm-v4w8-q58c">https://github.com/gitpython-developers/GitPython/security/advisories/GHSA-cwvm-v4w8-q58c</a>
          </li>
        </ul>

        <p style="text-align: right;">
          <img src="img/github-mark.png" alt="" width="100">
        </p>
        <aside class="notes">

          Explicar donde encontrar la pesta√±a de security,
          y como crear un reporte de vulnerabilidad, y explicar cada campo.

          Mostrar esta vulnerabilidad, y explicar cada campo.
          Un CVE no fue emitido.

          Mostrar esta vulnerabilidad, y explicar cada campo.
          Un CVE fue emitido.
        </aside>
      </section>

      <section data-background-color="#89CFF3" data-background-image="img/finding-bugs.png" data-background-size="300px"
        data-background-opacity="0.5">
        <header>
          <h2 class="r-fit-text">Encontrando</h2>
          <h2 class="r-fit-text">Vulnerabilidades</h2>
        </header>

        <aside class="notes">
          Ahora que ya sabemos como reportar vulnerabilidades,
          vamos a ver brevemente como encontrarlas.

          El secreto milenario de como encontrar vulnerabilidades y obtener tu primer CVE.
        </aside>
      </section>

      <section data-background-color="#1b998b" data-background-image="img/finding-bugs.png" data-background-size="300px"
        data-background-opacity="0.3">
        <h2>Encontrando vulnerabilidades</h2>

        <p>
          <span class="r-fit-text">EXPLORA Y LEE</span>
          <span class="r-fit-text">C√ìDIGO</span>
        </p>

        <aside class="notes">
          Lo peor que puede pasar es que aprendas algo nuevo.
          Es as√≠ de sencillo, y de dif√≠cil.
          Si, puedes usar herramientas como fuzzers, scanners, y linters.
          Pero estas herramientas no infalibles, y muchas veces retornan muchos falsos positivos,
          pero a√∫n as√≠ son √∫tiles.

          Ayuda mucho que est√©s familiarizado con las vulnerabilidades m√°s comunes.
          De lo contrario puede que leas un c√≥digo vulnerable y no te des cuenta.
          Lee vulnerabilidades reportadas en otros proyectos, y trata de encontrarlas en otros proyectos.

          Configura tu editor o IDE, LSP, con lo que te sientas m√°s c√≥modo,
          y en lugar de estar viendo tiktoks, lee c√≥digo.
        </aside>
      </section>

      <section data-background-image="img/finding-bugs.png" data-background-size="300px" data-background-opacity="0.3">
        <h2>Encontrando vulnerabilidades</h2>
        <ul>
          <li>Empieza por proyectos que uses o te interesen</li>
          <li>Familiar√≠zate con el c√≥digo del proyecto</li>
          <li>Lee las vulnerabilidades reportadas anteriormente</li>
          <li>Chequea vulnerabilidades similares en/de otros proyectos</li>
          <li>Lee sobre las vulnerabilidades m√°s comunes en el lenguaje o tecnolog√≠as usadas en el proyecto</li>
        </ul>

        <aside class="notes">
          Reportar vulnerabilidades es similar a contribuir a un proyecto open source,
          empieza por proyectos que uses, o que te interesen.
          Lee los reportes anteriores, y trata de encontrar vulnerabilidades similares.
        </aside>
      </section>

      <section data-background-image="img/finding-bugs.png" data-background-size="300px" data-background-opacity="0.3">
        <h2>Encontrando vulnerabilidades</h2>
        <ul>
          <li>
            Top 10 OWASP
            <br>
            <small>
              <a href="https://owasp.org/Top10/">https://owasp.org/Top10/</a>
            </small>
          </li>
          <li>
            Portswigger academy
            <br>
            <small>
              <a href="https://portswigger.net/web-security">https://portswigger.net/web-security</a>
            </small>
          </li>
          <li>
            Bandit
            <br>
            <small>
              <a href="https://bandit.readthedocs.io/en/latest/">https://bandit.readthedocs.io/en/latest/</a>
            </small>
          </li>
          <li>
            CodeQL
            <br>
            <small>
              <a href="https://codeql.github.com/">https://codeql.github.com/</a>
            </small>
          </li>
        </ul>

        <aside class="notes">
          Reportar vulnerabilidades es similar a contribuir a un proyecto open source,
          empieza por proyectos que uses, o que te interesen.
          Lee los reportes anteriores, y trata de encontrar vulnerabilidades similares.
        </aside>
      </section>


      <section data-background-image="img/finding-bugs.png" data-background-size="300px" data-background-opacity="0.3">
        <h2>Encontrando vulnerabilidades</h2>
        <ul>
          <li>Revisa todos los entry points que reciban input de usuarios</li>
          <li>
            Busca llamadas a funciones peligrosas
            <ul>
              <li>
                exec, eval, system, shell_exec, etc
              </li>
              <li>
                regex, format
              </li>
              <li>
                open, read, write, etc
              </li>
              <li>
                mark_safe, format_html, etc
              </li>
            </ul>
          </li>
          <li>
            <code>grep</code> es tu mejor amigo
          </li>
        </ul>
        <aside class="notes">
          Funciones peligrosas,
          realmente no me gusta llamarlas as√≠, porque por si s√≥las
          no lo son. Pueden llegar a ser peligrosas si no son usadas correctamente,
          o si se las usa con un input no confiable.
        </aside>
      </section>

      <section data-background-color="#da5552">
        <!--ü¶óüêùüï∑Ô∏èüêõü¶ãü™∞ü¶üüêåü¶†ü¶óü™≤ü¶ãüêù-->
        <h2>Ejemplo üêú</h2>
        <p>
          Llamada a funci√≥n peligrosa
        </p>

        <pre class=""><code data-trim data-noescape class="python" data-line-numbers="1-4|1-4,6-8|1-4,10-11">
            import re

            def contains(word, text):
                return bool(re.search(word, text, re.IGNORECASE))

            # Retorna True
            contains("hola", "Hola mundo")
            contains("HolA", "Hola mundo")

            # La funci√≥n tarda mucho tiempo en ejecutarse.
            contains("(a|a)*b", "Holaaaaaaaaaaaaaaaaaaaaaaaaa mundo")
          </code></pre>
      </section>

      <section data-background-color="#1b998b">
        <h2>Ejemplo üêú</h2>
        <p>
          Llamada a funci√≥n peligrosa
        </p>

        <pre><code data-trim data-noescape class="python" data-line-numbers="1-2|">
            def contains(word, text):
                return word.lower() in text.lower()

            # Retorna True
            contains("hola", "Hola mundo")
            contains("HolA", "Hola mundo")

            # Retorna False
            contains("(a|a)*b", "Holaaaaaaaaaaaaaaaaaaaaaaaaa mundo")
          </code></pre>

        <p>
          <small>
            <a style="color: white;" href="https://github.com/advisories/GHSA-wj85-w4f4-xh8h">
              https://github.com/advisories/GHSA-wj85-w4f4-xh8h
            </a>
          </small>
        </p>
      </section>

      <section data-transition="zoom">
        <h2>¬°T√∫ tambi√©n puedes hacerlo!</h2>
        <p>
          Hagamos los proyectos open source m√°s seguros juntos
        </p>

        <img src="img/qr.png" width="200px">

        <div>
          <h6>Referencias y recursos adicionales</h6>
          <ul>
            <li>
              <a href="https://github.blog/2022-02-09-coordinated-vulnerability-disclosure-cvd-open-source-projects/">
                Coordinated vulnerability disclosure for open source projects
              </a>
              <br>
              <small>
                https://github.blog/2022-02-09-coordinated-vulnerability-disclosure-cvd-open-source-projects/
              </small>
            </li>
            <li>
              <a href="https://cheatsheetseries.owasp.org/cheatsheets/Vulnerability_Disclosure_Cheat_Sheet.html">
                OWASP's vulnerability disclosure cheat sheet
              </a>
              <br>
              <small>
                https://cheatsheetseries.owasp.org/cheatsheets/Vulnerability_Disclosure_Cheat_Sheet.html
              </small>
            </li>
          </ul>
        </div>
        <footer class="fragment">
          <p>
            <small>
              <a href="https://stsewd.dev">
                <span>
                  M√°s sobre mi
                </span>
                <br />
                <span>https://stsewd.dev</span>
              </a>
            </small>
          </p>

          <p>
            <small>
              <a href="https://github.com/stsewd/charla-reportando-vulnerabilidades-en-proyectos-open-source">
                <span>
                  C√≥digo fuente <i class="fas fa-code-branch"></i>
                </span>
                <br />
                <span>https://github.com/stsewd/charla-reportando-vulnerabilidades-en-proyectos-open-source</span>
              </a>
            </small>
          </p>

          <p>
            <small>
              @stsewd
              <a href="http://github.com/stsewd"><i class="fab fa-github"></i></a>
              <a href="http://twitter.com/stsewd"><i class="fab fa-twitter"></i></a>
            </small>
          </p>
        </footer>

        <aside class="notes">
          Ah√≠ les dejo el enlace a esta presentaci√≥n y a mi blog donde a veces escribo cosas. y tambi√©n estan las vulnerabilidades

          Eso fue todo por hoy, espero hayan aprendido algo nuevo. Ahora vamos a las
          preguntas. Si algo no se entendi√≥, es probablemente mi culpa, no lo expliqu√©
          bien, as√≠ que si√©ntanse libres de preguntar algo incluso si ya lo
          di en la presentaci√≥n, y lo voy a tratar de aclarar.

          En mi blog tambi√©n pueden encontrar una lista de las vulnerabilidades
          p√∫blicas que reportado, podemos hablar sobre eso m√°s luego si desean.
        </aside>
      </section>
    </div>
  </div>

  <script src="node_modules/reveal.js/dist/reveal.js"></script>
  <script src="node_modules/reveal.js/plugin/notes/notes.js"></script>
  <script src="node_modules/reveal.js/plugin/markdown/markdown.js"></script>
  <script src="node_modules/reveal.js/plugin/highlight/highlight.js"></script>
  <script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
      hash: true,
      maxScale: 0.7,
      width: 1060,
      height: 800,
      // Learn about plugins: https://revealjs.com/plugins/
      plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
    });
  </script>
</body>

</html>
